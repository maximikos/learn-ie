
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" sizes="100x100" href="../../../_static/logo/iep_favicon.ico" type="image/x-icon">
    <title>LCA &#8212; IEP  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=0e43bd88" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../../_static/documentation_options.js?v=8a448e45"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/theory/methods/lca';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.2';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/brightway-lca/brightway-documentation/main/source/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'latest';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Structure" href="../structure.html" />
    <link rel="prev" title="Import and Export" href="io.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/nemora_logo_small.png" class="logo__image only-light" alt="IEP  documentation - Home"/>
    <script>document.write(`<img src="../../../_static/nemora_logo_small.png" class="logo__image only-dark" alt="IEP  documentation - Home"/>`);</script>
  
  
</a></div>
    
      <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Theory
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../insights/index.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../resources/index.html">
                        FAQ
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../contributing/index.html">
                        Contributing
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../contact/contact.html">
                        Contact
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../about/index.html">
                        About
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/maximikos" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Theory
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../insights/index.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../resources/index.html">
                        FAQ
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../contributing/index.html">
                        Contributing
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../contact/contact.html">
                        Contact
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../about/index.html">
                        About
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/maximikos" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../history/index.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">Concepts</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Methods</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="io.html">Import and Export</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">LCA</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../structure.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uncertainty.html">Uncertainty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graph_traversal.html">Graph traversal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../static_and_stochastic_lca.html">Normal Static LCA</a></li>

</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Theory</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Methods</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">LCA</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lca">
<h1>LCA<a class="headerlink" href="#lca" title="Link to this heading">#</a></h1>
<section id="specifying-a-functional-unit">
<h2>Specifying a functional unit<a class="headerlink" href="#specifying-a-functional-unit" title="Link to this heading">#</a></h2>
<p>The functional unit for any LCA calculation is a dictionary of keys and
amounts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="p">(</span><span class="s2">&quot;a database&quot;</span><span class="p">,</span> <span class="s2">&quot;the answer&quot;</span><span class="p">):</span> <span class="mi">42</span><span class="p">,</span>
    <span class="p">(</span><span class="s2">&quot;a database&quot;</span><span class="p">,</span> <span class="s2">&quot;pi&quot;</span><span class="p">):</span> <span class="mf">3.14159265358979</span>
<span class="p">}</span>
</pre></div>
</div>
<p>However, you can also use a <code class="docutils literal notranslate"><span class="pre">Activity</span></code> proxy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">brightway2</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">activity</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s2">&quot;ecoinvent 3.2 cutoff&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="nb">type</span><span class="p">(</span><span class="n">activity</span><span class="p">),</span> <span class="n">activity</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
<span class="p">(</span><span class="n">bw2data</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">peewee</span><span class="o">.</span><span class="n">proxies</span><span class="o">.</span><span class="n">Activity</span><span class="p">,</span>
 <span class="s1">&#39;quicklime production, milled, packed&#39;</span> <span class="p">(</span><span class="n">kilogram</span><span class="p">,</span> <span class="n">CH</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">lca</span> <span class="o">=</span> <span class="n">LCA</span><span class="p">({</span><span class="n">activity</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">lca</span><span class="o">.</span><span class="n">demand</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;quicklime production, milled, packed&#39;</span> <span class="p">(</span><span class="n">kilogram</span><span class="p">,</span> <span class="n">CH</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<p>How does this work? It is quite simple - the <code class="docutils literal notranslate"><span class="pre">Activity</span></code> proxy knows how
to pretend to be a key tuple:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">activity</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">activity</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="p">(</span><span class="s1">&#39;ecoinvent 3.2 cutoff&#39;</span><span class="p">,</span> <span class="s1">&#39;ab2f7a551a06a59de9191065128233e4&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">activity</span> <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;ecoinvent 3.2 cutoff&#39;</span><span class="p">,</span> <span class="s1">&#39;ab2f7a551a06a59de9191065128233e4&#39;</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="kc">True</span>
</pre></div>
</div>
<p>This is an instance of <a class="reference external" href="https://en.wikipedia.org/wiki/Duck_typing">duck
typing</a> - if it walks like a
duck and quacks like a duck, then we can treat it like a duck.</p>
<p>If you are interested in the details, see how
<code class="docutils literal notranslate"><span class="pre">bw2data.proxies.ActivityProxyBase</span></code> defines <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> and other <code class="docutils literal notranslate"><span class="pre">__</span></code>
magic methods.</p>
</section>
<section id="turning-processed-data-arrays-in-matrices-building-matrices">
<h2>Turning processed data arrays in matrices {#building-matrices}<a class="headerlink" href="#turning-processed-data-arrays-in-matrices-building-matrices" title="Link to this heading">#</a></h2>
<p>A parameter array is a NumPy <a class="reference external" href="http://docs.scipy.org/doc/numpy/user/basics.rec.html">structured or record
array</a>, where each
column has a label and data type. Here is an sample of the parameter
array for the US LCI:</p>
<p>input   output   row          col          type   amount</p>
<hr class="docutils" />
<p>9829    9829     4294967295   4294967295   0      1.0
9708    9708     4294967295   4294967295   0      1.0
9633    9633     4294967295   4294967295   0      1.0
9276    9276     4294967295   4294967295   0      3.0999
8778    8778     4294967295   4294967295   0      1.0
9349    9349     4294967295   4294967295   0      1000.0
5685    9349     4294967295   4294967295   2      14.895
9516    9349     4294967295   4294967295   1      1032.7
9433    9349     4294967295   4294967295   1      4.4287
8838    9349     4294967295   4294967295   1      1.5490</p>
<p>There are also some columns for uncertainty information, but these would
only be a distraction for now. The complete spec for the uncertainty
fields is given in the <a class="reference external" href="http://stats-arrays.readthedocs.io/en/latest/">stats_arrays
documentation</a>.</p>
<p>We notice several things:</p>
<blockquote>
<div><ul class="simple">
<li><p>Both the <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> columns have numbers, but we don’t
know what they mean yet</p></li>
<li><p>Both the <code class="docutils literal notranslate"><span class="pre">row</span></code> and <code class="docutils literal notranslate"><span class="pre">col</span></code> columns are filled with a large number</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> column has only a few values, but they are also
mysterious</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">amount</span></code> column is the only one that seems reasonable, and
gives the values that should be inserted into the matrix</p></li>
</ul>
</div></blockquote>
<section id="input-and-output">
<h3>Input and Output<a class="headerlink" href="#input-and-output" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> columns gives values for biosphere flows or
transforming activity data sets. The <code class="docutils literal notranslate"><span class="pre">mapping</span></code>
is used to translate keys like <code class="docutils literal notranslate"><span class="pre">(&quot;Douglas</span> <span class="pre">Adams&quot;,</span> <span class="pre">42)</span></code> into
integer values. So, each mapping number uniquely identifies an activity
dataset.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> values are the same, then this is a
production exchange - it describes how much product is produced by the
transforming activity dataset.</p>
<div class="warning docutils">
<div class="title docutils">
<p>Warning</p>
</div>
</div>
<p>Integer mapping ids are not transferable from machine to machine or
installation to installation, as the order of insertion (and hence the
integer id) is more or less at random. Always <code class="docutils literal notranslate"><span class="pre">.process()</span></code> datasets on a
new machine.</p>
<div class="docutils">
<h3 class="rubric" id="rows-and-columns">Rows and columns</h3>
<p>The <code class="docutils literal notranslate"><span class="pre">row</span></code> and <code class="docutils literal notranslate"><span class="pre">col</span></code> columns have the data type <em>unsigned integer, 32
bit</em>, and the maximum value is therefore <span class="math notranslate nohighlight">\(2^{32} - 1\)</span>, i.e. 4294967295.
This is just a dummy value telling Brightway2 to insert better data.</p>
<p>The method <code class="docutils literal notranslate"><span class="pre">MatrixBuilder.build_dictionary</span></code> is used to take <code class="docutils literal notranslate"><span class="pre">input</span></code> and
<code class="docutils literal notranslate"><span class="pre">output</span></code> values, respectively, and figure out which rows and columns
they correspond to. The actual code is succinct - only one line - but
what it does is:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Get all unique values, as each value will appear multiple times</p></li>
<li><p>Sort these values</p></li>
<li><p>Give them integer indices, starting with zero</p></li>
</ol>
</div></blockquote>
<p>For our example parameter array, the dictionary from <code class="docutils literal notranslate"><span class="pre">input</span></code> values to
<code class="docutils literal notranslate"><span class="pre">row</span></code> would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="mi">5685</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="mi">8778</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="mi">8838</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
 <span class="mi">9276</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="mi">9349</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
 <span class="mi">9433</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
 <span class="mi">9516</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
 <span class="mi">9633</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
 <span class="mi">9708</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
 <span class="mi">9829</span><span class="p">:</span> <span class="mi">9</span><span class="p">}</span>
</pre></div>
</div>
<p>And the dictionary from <code class="docutils literal notranslate"><span class="pre">output</span></code> to <code class="docutils literal notranslate"><span class="pre">col</span></code> would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="mi">8778</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="mi">9276</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="mi">9349</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
 <span class="mi">9633</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="mi">9708</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
 <span class="mi">9829</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">MatrixBuilder.add_matrix_indices</span></code> would replace the
4294967295 values with dictionary values based on <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code>.
At this point, we have enough to build a sparse matrix using
<code class="docutils literal notranslate"><span class="pre">MatrixBuilder.build_matrix</span></code>:</p>
<p>row   col   amount</p>
<hr class="docutils" />
<p>9     5     1.0
8     4     1.0
7     3     1.0
3     1     3.0999
1     0     1.0
4     2     1000.0
0     2     14.895
6     2     1032.7
5     2     4.4287
2     2     1.5490</p>
<p>Indeed, the <a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html">coordinate (coo)
matrix</a>
takes as inputs exactly the row and column indices, and the values to
insert.</p>
<p>Of course, there are some details for specific matrices - technosphere
matrices need to be square, and should have ones by default on the
diagonal, etc. etc., but this is the general idea.</p>
<h3 class="rubric" id="types">Types</h3>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> column indicates whether a value should be in the
technosphere or biosphere matrix: <code class="docutils literal notranslate"><span class="pre">0</span></code> is a transforming activity
production amount, <code class="docutils literal notranslate"><span class="pre">1</span></code> is a technosphere exchange, and <code class="docutils literal notranslate"><span class="pre">2</span></code> is a
biosphere exchange.</p>
<h2 class="rubric" id="brightway2-lca-reports">Brightway2 LCA Reports</h2>
<p>The Brightway2 report data format is evolving, and this section should
not be understood as definitive.</p>
</div>
<p>LCA reports calculated with <code class="docutils literal notranslate"><span class="pre">bw2analyzer.report.SerializedLCAReport</span></code> are
written as a JSON file to disk. It has the following data format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;monte carlo&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;statistics&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="n">values</span><span class="p">],</span>
            <span class="s2">&quot;median&quot;</span><span class="p">:</span> <span class="n">median</span><span class="p">,</span>
            <span class="s2">&quot;mean&quot;</span><span class="p">:</span> <span class="n">mean</span>
        <span class="p">},</span>
        <span class="s2">&quot;smoothed&quot;</span><span class="p">:</span> <span class="p">[</span>  <span class="c1">## This is smoothed values for drawing empirical PDF</span>
            <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="s2">&quot;histogram&quot;</span><span class="p">:</span> <span class="p">[</span>  <span class="c1">## This are point coordinates for each point when drawing histogram bins</span>
            <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">LCA</span> <span class="n">score</span><span class="p">,</span>
    <span class="s2">&quot;activity&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">unit</span><span class="p">],</span>
    <span class="p">],</span>
    <span class="s2">&quot;contribution&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;hinton&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;xlabels&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">label</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;ylabels&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">label</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="n">LCA</span> <span class="n">score</span><span class="p">,</span>
            <span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span><span class="n">x</span> <span class="n">index</span><span class="p">,</span> <span class="n">y</span> <span class="n">index</span><span class="p">,</span> <span class="n">score</span><span class="p">],</span> <span class="c1">## See hinton JS implementation in bw2ui source code</span>
            <span class="p">],</span>
        <span class="p">},</span>
        <span class="s2">&quot;treemap&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;size:&quot;</span> <span class="n">LCA</span> <span class="n">score</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;LCA result&quot;</span><span class="p">,</span>
            <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">activity</span> <span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">activity</span> <span class="n">LCA</span> <span class="n">score</span>
                <span class="p">},</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="s2">&quot;herfindahl&quot;</span><span class="p">:</span> <span class="n">herfindahl</span> <span class="n">score</span><span class="p">,</span>
        <span class="s2">&quot;concentration&quot;</span><span class="p">:</span> <span class="n">concentration</span> <span class="n">score</span>
    <span class="p">},</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">method</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="n">method</span> <span class="n">unit</span>
    <span class="p">},</span>
    <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">report</span> <span class="n">data</span> <span class="nb">format</span> <span class="n">version</span> <span class="n">number</span> <span class="p">(</span><span class="n">this</span> <span class="ow">is</span> <span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Brightway2 serialized LCA report&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uuid&quot;</span><span class="p">:</span> <span class="n">the</span> <span class="n">UUID</span> <span class="n">of</span> <span class="n">this</span> <span class="n">report</span><span class="p">,</span>
        <span class="s2">&quot;online&quot;</span><span class="p">:</span> <span class="n">URL</span> <span class="n">where</span> <span class="n">this</span> <span class="n">report</span> <span class="n">can</span> <span class="n">be</span> <span class="n">accessed</span><span class="o">.</span> <span class="n">Optional</span><span class="o">.</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifying-a-functional-unit">Specifying a functional unit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#turning-processed-data-arrays-in-matrices-building-matrices">Turning processed data arrays in matrices {#building-matrices}</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#input-and-output">Input and Output</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
<div id="searchbox"></div></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/brightway-lca/brightway-documentation/edit/main/source/content/theory/methods/lca.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/content/theory/methods/lca.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
<div class="tocsection supportbutton">

    <a href=" latest/../../../../content/other/support.html">
      <i class="far fa-heart"></i> Support Brightway
    </a>
</div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024 International Society for Industrial Ecology.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p>🌿🐛 Found a bug? Something not working? Frustrated? <a href=" latest/../../../../content/contributing/bugs.html">Please report it!</a></p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>